<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quest App Vanilla JS</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 20px;
  }

  #progress-bar-container {
    width: 100%;
    height: 20px;
    background: #eee;
    margin-bottom: 20px;
    border-radius: 10px;
    overflow: hidden;
  }

  #progress-bar {
    height: 100%;
    width: 0%;
    background: green;
    transition: width 0.3s ease;
  }

  ul {
    list-style: none;
    padding: 0;
  }

  li {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
  }

  li.completed p {
    text-decoration: line-through;
    color: gray;
  }

  button {
    margin-left: 10px;
  }
</style>
</head>
<body>

<h1>Quest App</h1>

<form id="quest-form">
  <input type="text" id="quest-name" placeholder="Nueva quest" required>
  <select id="quest-type">
    <option value="positive">Positive</option>
    <option value="negative">Negative</option>
  </select>
  <button type="submit">Agregar</button>
</form>

<div id="progress-bar-container">
  <div id="progress-bar"></div>
</div>

<ul id="quest-list"></ul>

<script>
  const form = document.getElementById('quest-form');
  const questNameInput = document.getElementById('quest-name');
  const questTypeInput = document.getElementById('quest-type');
  const questListEl = document.getElementById('quest-list');
  const progressBar = document.getElementById('progress-bar');

  let quests = [];

  function renderQuests() {
    // Render lista
    questListEl.innerHTML = '';
    quests.forEach(q => {
      const li = document.createElement('li');
      li.dataset.id = q.id;
      if (q.completed) li.classList.add('completed');

      const p = document.createElement('p');
      p.textContent = `${q.name} (${q.type})`;
      li.appendChild(p);

      const checkbox = document.createElement('input');
      checkbox.type = 'checkbox';
      checkbox.checked = q.completed;
      checkbox.addEventListener('change', () => toggleQuest(q.id));
      li.appendChild(checkbox);

      const btnDelete = document.createElement('button');
      btnDelete.textContent = 'Delete';
      btnDelete.addEventListener('click', () => deleteQuest(q.id));
      li.appendChild(btnDelete);

      questListEl.appendChild(li);
    });

    // Render barra de progreso
    const completedCount = quests.filter(q => q.completed).length;
    const percent = quests.length === 0 ? 0 : (completedCount / quests.length) * 100;
    progressBar.style.width = percent + '%';
  }

  function addQuest(name, type) {
    const newQuest = {
      id: crypto.randomUUID(),
      name,
      type,
      completed: false
    };
    quests.push(newQuest);
    renderQuests();
  }

  function deleteQuest(id) {
    quests = quests.filter(q => q.id !== id);
    renderQuests();
  }

  function toggleQuest(id) {
    const quest = quests.find(q => q.id === id);
    if (quest) {
      quest.completed = !quest.completed;
      renderQuests();
    }
  }

  form.addEventListener('submit', (e) => {
    e.preventDefault();
    addQuest(questNameInput.value.trim(), questTypeInput.value);
    questNameInput.value = '';
  });

  // Inicial render
  renderQuests();
</script>

</body>
</html>
